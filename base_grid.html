<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Embryo V4.0</title>
  <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      background: #2c2c2c;
      font-family: 'Press Start 2P', monospace;
      font-size: 12px;
      min-height: 100vh;
      min-height: 100dvh; /* Dynamic viewport height en móviles */
      display: flex;
      justify-content: center;
      align-items: center;
      overflow-x: hidden;
    }

    .base-container {
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      width: 100%;
      max-width: 700px;
      padding: 10px;
    }

    .base-grid {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      grid-auto-rows: 1fr;
      gap: 10px;
      width: 100%;
      height: 100%;
    }

    .btn {
      aspect-ratio: 1/1;
      background: #000;
      border: 4px solid #fff;
      border-radius: 12px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 12px;
      text-transform: uppercase;
      letter-spacing: 1px;
      color: #fff;
      transition: all 0.2s ease;
      user-select: none;
      position: relative;
      overflow: hidden;
    }

    /* Hover desactivado en toda la interfaz */

    .btn:active {
      transform: translateY(0);
      box-shadow: 0 2px 4px rgba(0,0,0,0.2);
      background: #222;
    }

    .btn::after {
      content: '';
      position: absolute;
      width: 100%;
      height: 100%;
      top: 0;
      left: 0;
      background: radial-gradient(circle, rgba(255,255,255,0.5) 0%, transparent 70%);
      transform: scale(0);
      opacity: 0;
    }

    .btn:active::after {
      animation: ripple 0.6s ease-out;
    }

    @keyframes ripple {
      0% { transform: scale(0); opacity: 1; }
      100% { transform: scale(2); opacity: 0; }
    }

    /* Fila 2 subdividida en dos filas */
    .row-2 {
      grid-column: span 4;
      display: grid;
      grid-template-rows: 1fr 1fr; /* Dos filas con altura dividida en 2 */
      gap: 10px;
    }

    .row-2-top {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 10px;
    }

    .row-2-bottom {
      display: grid;
      grid-template-columns: repeat(9, 1fr);
      gap: 10px;
    }

    .btn.rec {
      aspect-ratio: 210/80; /* Botón rectangular más bajo para nueva altura */
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 0;
      position: relative;
      background: #fff; /* Fondo blanco sólido */
      color: #000; /* Texto negro */
      border: none; /* Sin borde */
      font-size: 12px;
    }

    .btn.numbered {
      position: relative;
    }

    .btn.numbered::before {
      content: attr(data-number);
      position: absolute;
      top: 4px;
      left: 6px;
      font-size: 8px;
      color: #fff;
      font-weight: bold;
      pointer-events: none;
    }

    /* Sliders horizontales (estética base_grid) */
    .slider {
      width: 100%;
      height: 100%;
      border-radius: 12px;
      background: #000;
      border: 4px solid #fff;
      position: relative;
      overflow: hidden;
      cursor: pointer;
    }
    .slider-track {
      position: absolute;
      left: 10px;
      right: 10px;
      top: 50%;
      transform: translateY(-50%);
      height: 8px;
      background: rgba(255,255,255,0.35);
      border-radius: 4px;
    }
    .slider-fill {
      position: absolute;
      left: 10px;
      top: 50%;
      transform: translateY(-50%);
      height: 8px;
      width: 0%;
      background: #fff;
      border-radius: 4px;
    }
    .slider-thumb {
      position: absolute;
      top: 50%;
      transform: translate(-50%, -50%);
      width: 6px;
      height: 32px;
      border-radius: 3px;
      background: #fff;
      left: 10px;
    }
    .slider-thumb::after {
      content: '';
      position: absolute;
      top: 3px;
      bottom: 3px;
      left: 50%;
      transform: translateX(-50%);
      width: 2px;
      background: #000;
      border-radius: 1px;
      opacity: 0.95;
    }

    /* Texto del fader usando el atributo data-label */
    .slider::after {
      content: attr(data-label);
      position: absolute;
      top: 6px;
      left: 50%;
      transform: translateX(-50%);
      color: #fff;
      font-size: 10px;
      font-weight: 600;
      pointer-events: none;
    }


    @media (max-width: 480px) {
      .btn {
        font-size: 10px;
        border-radius: 8px;
      }
      .base-grid { gap: 6px; }
      .row-2 { gap: 6px; }
      .row-2-top { gap: 6px; }
      .row-2-bottom { gap: 6px; }
    }
  </style>
</head>
<body>
  <div class="base-container">
    <div class="base-grid">
      <div class="slider" data-label="Volume" data-value="95"></div>
      <div class="slider" data-label="Distortion" data-value="57"></div>
      <div class="slider" data-label="Cutoff" data-value="76"></div>
      <div class="slider" data-label="Resonance" data-value="38"></div>

      <div class="row-2">
        <div class="row-2-top">
          <div class="btn rec">
            <div class="section-top">TEMPO</div>
          </div>
          <div class="btn rec">
            <div class="section-top">PATTERN</div>
          </div>
          <div class="btn rec">
            <div class="section-top">BAR / BEAT</div>
          </div>
        </div>
        <div class="row-2-bottom">
          <div class="btn">-</div>
          <div class="btn">96</div>
          <div class="btn">+</div>
          <div class="btn"> < </div>
          <div class="btn">01</div>
          <div class="btn"> > </div>
          <div class="btn"> < </div>
          <div class="btn"> 1.1 </div>
          <div class="btn"> > </div>
        </div>
      </div>

      <div class="btn" aria-label="shift">
        <svg viewBox="0 0 100 100" width="60%" height="60%" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
          <circle cx="50" cy="50" r="45" fill="none" stroke="#fff" stroke-width="8"/>
          <path d="M50 20 L75 45 H60 V80 H40 V45 H25 Z" fill="#fff"/>
        </svg>
      </div>
      <div class="btn" aria-label="stop">
        <svg viewBox="0 0 100 100" width="60%" height="60%" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
          <circle cx="50" cy="50" r="45" fill="none" stroke="#fff" stroke-width="8"/>
          <rect x="35" y="35" width="30" height="30" fill="#fff"/>
        </svg>
      </div>
      <div class="btn" aria-label="play">
        <svg viewBox="0 0 100 100" width="60%" height="60%" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
          <circle cx="50" cy="50" r="45" fill="none" stroke="#fff" stroke-width="8"/>
          <path d="M40 32 L70 50 L40 68 Z" fill="#fff"/>
        </svg>
      </div>
      <div class="btn" aria-label="record">
        <svg viewBox="0 0 100 100" width="60%" height="60%" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
          <circle cx="50" cy="50" r="45" fill="none" stroke="#fff" stroke-width="8"/>
          <circle cx="50" cy="50" r="18" fill="#fff"/>
        </svg>
      </div>

      <div class="btn numbered" data-number="1"></div>
      <div class="btn numbered" data-number="2"></div>
      <div class="btn numbered" data-number="3"></div>
      <div class="btn numbered" data-number="4"></div>

      <div class="btn numbered" data-number="5"></div>
      <div class="btn numbered" data-number="6"></div>
      <div class="btn numbered" data-number="7"></div>
      <div class="btn numbered" data-number="8"></div>

      <div class="btn numbered" data-number="9"></div>
      <div class="btn numbered" data-number="10"></div>
      <div class="btn numbered" data-number="11"></div>
      <div class="btn numbered" data-number="12"></div>

      <div class="btn numbered" data-number="13"></div>
      <div class="btn numbered" data-number="14"></div>
      <div class="btn numbered" data-number="15"></div>
      <div class="btn numbered" data-number="16"></div>
    </div>
  </div>

  <script>
    // Sliders: utilidades e inicialización (0..127)
    function clamp(v, min, max){ return Math.max(min, Math.min(max, v)); }
    function createSliderInternals(el){
      const track = document.createElement('div'); track.className = 'slider-track';
      const fill  = document.createElement('div'); fill.className = 'slider-fill';
      const thumb = document.createElement('div'); thumb.className = 'slider-thumb';
      el.appendChild(track); el.appendChild(fill); el.appendChild(thumb);
    }
    function valueToUI(el, value){
      const v = clamp(value, 0, 127);
      const pct = v / 127;
      const padL = 10, padR = 10;
      const w = el.clientWidth - (padL + padR);
      const thumbRadius = 3; // mitad del ancho (6px)
      const xRaw = padL + pct * w;
      const x = clamp(xRaw, padL + thumbRadius, padL + w - thumbRadius);
      const fill = el.querySelector('.slider-fill');
      const thumb = el.querySelector('.slider-thumb');
      if (fill) fill.style.width = `${clamp(x - padL, 0, w)}px`;
      if (thumb) thumb.style.left = `${x}px`;
      el.dataset.value = String(Math.round(v));
    }
    function pointerValue(el, clientX){
      const rect = el.getBoundingClientRect();
      const left = rect.left + 10, right = rect.right - 10;
      const w = right - left;
      const clampedX = clamp(clientX, left, right);
      const pct = (clampedX - left) / w;
      return clamp(Math.round(pct * 127), 0, 127);
    }
    function bindSlider(el){
      let isDragging = false;
      el.addEventListener('mousedown', (e)=>{ isDragging = true; valueToUI(el, pointerValue(el, e.clientX)); e.preventDefault(); });
      document.addEventListener('mousemove', (e)=>{ if(!isDragging) return; valueToUI(el, pointerValue(el, e.clientX)); });
      document.addEventListener('mouseup', ()=>{ isDragging = false; });
      el.addEventListener('touchstart', (e)=>{ isDragging = true; valueToUI(el, pointerValue(el, e.touches[0].clientX)); e.preventDefault(); }, { passive:false });
      document.addEventListener('touchmove', (e)=>{ if(!isDragging) return; valueToUI(el, pointerValue(el, e.touches[0].clientX)); e.preventDefault(); }, { passive:false });
      document.addEventListener('touchend', ()=>{ isDragging = false; });
      createSliderInternals(el);
      valueToUI(el, parseFloat(el.getAttribute('data-value')||'64'));
    }
    document.querySelectorAll('.slider').forEach(bindSlider);
    // (Diales retirados)
    // Eventos para botones regulares
    document.querySelectorAll('.btn:not(.rec)').forEach(btn => {
      btn.addEventListener('click', () => {
        console.log('Botón presionado:', btn.textContent);
      });
    });

    // Eventos para secciones inferiores de botones rectangulares
    document.querySelectorAll('.btn.rec .section-bottom').forEach(section => {
      section.addEventListener('click', () => {
        const topText = section.previousElementSibling.textContent;
        const bottomText = section.textContent;
        console.log('Sección inferior presionada:', `${topText} - ${bottomText}`);
      });
    });
  </script>
</body>
</html>
